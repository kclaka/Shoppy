

<html>
<head>
    <title>Shoppy</title>
    <script src="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.css"/>
    <link type="text/css" rel="stylesheet" href="{{url_for('static', filename='main.css')}}">
    <link type="text/css" rel="stylesheet" href="{{url_for('static', filename='css.css')}}">


</head>
<body>
<div class="content">
    <div class="head" id="head">
        <p>Your shopping list</p>
    </div>
    {% if user %}
    <div class="form" id="inputBar">
        <form id="form" action="/" method="POST">
            <input type="text" name="name" class="name" id="name" placeholder="Item Name" autofocus="">
            <input type="number" name="qty" min="1" class="qty" id="qty" placeholder="Item Quantity">
            <input type="submit" class="subm" id="subm" value="Add">
        </form>
    </div>


    <div style="overflow-x:auto;">
        <table id="table" class="center" style="background-color:rgba(0, 0, 0, 0);">
            <tbody>
            <tr>
                <th bgcolor="orange">Item</th>
                <th bgcolor="orange">Quantity</th>

                {% if items %}
                    {% for item in items %}
                        <tr>
                            <td style="word-break:break-all;"> <!-- Stop the text from going past the table borders-->
                                {{item['item_name']}}
                                <a href="/delete/197"><input type="button" class="btn" name="delete" value="X" style="float: left;"></a>
                            </td>
                            <td>
                                <form action="{{url_for('delete', item = item.id)}}" method="post">
                                    <button type="button" class="btnD" name="decrement" value="-"></button>
                                </form>
                                <form action="{{url_for('delete', item = item.id)}}" method="post">
                                    <button name = "button" class="btnI" name="increment" value="+"></button>
                                </form>

                                {{item['item_qty']}}
                                <a href="/increment/197"><input type="button" class="btnI" name="increment" value="+"></a>
                            </td>

                        </tr>
                        {% endfor %}

                <form class="form" action="{{url_for('delete_all')}}" method="post">
                    <input type="submit" value="Delete all Items"
                    onclick="return confirm('Do you want to delete your entire list?')">
                    </form>
            {% endif %}

            </tbody>
        </table>

    </div>
    {% else %}
    <p>Please Sign in!</p>
    {% endif %}

</div>

<div id="firebaseui-auth-container"></div>
<div id="login-info">
    {% if user %}
    <img class="avatar" src="{{user['picture']}}">
    <span>
            Signed in as {{ user['name'] }}
          <br>
        {% elif error_message %}
          Error: {{ error_message }}
        {% endif %}
          <button id="sign-out">Sign out</button> if that's not you!
        </span>
</div>

</body>
<script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-analytics.js"></script>

<script>
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      var firebaseConfig = {
        apiKey: "AIzaSyC_EmOuL_1_cLBSFzgIVOr9cPIKZgsbQco",
        authDomain: "poetic-chariot-319022.firebaseapp.com",
        projectId: "poetic-chariot-319022",
        storageBucket: "poetic-chariot-319022.appspot.com",
        messagingSenderId: "810236185130",
        appId: "1:810236185130:web:4267a9af343d82a38ad153",
        measurementId: "G-SJV3JFJBZN"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();

</script>
<script src="{{ url_for('static', filename='script.js')}}"></script>

</html>